import{_ as k,c as p,a as l,F,r as V,b as r,w as s,d as i,e as c,f as _,g as y,E as g,u as L,o as b}from"./index-TM74CWPp.js";import{u as h}from"./user-DlmAq8sw.js";const C={name:"Login",setup(){const f=L(),e=h(),u=_(null),o=_(!1),d=y({username:"",password:""});return{loginForm:d,loginFormRef:u,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在3到20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度应在6到20个字符之间",trigger:"blur"}]},loading:o,handleLogin:async()=>{u.value&&await u.value.validate(async n=>{if(n){o.value=!0;try{const t=await e.login(d);t.success?(g.success("登录成功"),f.push("/chat")):g.error(t.message)}catch{g.error("登录失败，请稍后再试")}finally{o.value=!1}}})}}}},B={class:"login-container"},E={class:"background-animation"},N={class:"login-box"},R={class:"register-link"};function U(f,e,u,o,d,v){const m=i("el-input"),n=i("el-form-item"),t=i("el-button"),w=i("el-form"),x=i("router-link");return b(),p("div",B,[l("div",E,[(b(),p(F,null,V(10,a=>l("div",{class:"bubble",key:a})),64))]),l("div",N,[e[5]||(e[5]=l("div",{class:"welcome-text"},[l("h1",null,"家庭聊天系统"),l("p",null,"连接家人，分享生活的每一刻")],-1)),r(w,{model:o.loginForm,rules:o.rules,ref:"loginFormRef","label-width":"0",class:"login-form"},{default:s(()=>[r(n,{prop:"username"},{default:s(()=>[r(m,{modelValue:o.loginForm.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.loginForm.username=a),placeholder:"用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),r(n,{prop:"password"},{default:s(()=>[r(m,{modelValue:o.loginForm.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.loginForm.password=a),type:"password",placeholder:"密码","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),r(n,null,{default:s(()=>[r(t,{type:"primary",loading:o.loading,onClick:o.handleLogin,class:"login-button"},{default:s(()=>e[2]||(e[2]=[c("登录")])),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"]),l("div",R,[e[4]||(e[4]=c(" 还没有账号？")),r(x,{to:"/register"},{default:s(()=>e[3]||(e[3]=[c("立即注册")])),_:1})])])])}const I=k(C,[["render",U],["__scopeId","data-v-f370d7f4"]]);export{I as default};
