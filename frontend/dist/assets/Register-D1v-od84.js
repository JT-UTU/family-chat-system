import{_ as V,c as v,a as l,F as P,r as y,b as o,w as a,d as m,e as g,f as b,g as k,E as f,u as R,o as F}from"./index-CfLhrfcW.js";import{u as E}from"./user-YmuPi-ZC.js";const C={name:"Register",setup(){const p=R(),e=E(),n=b(null),s=b(!1),i=k({username:"",password:"",confirmPassword:""});return{registerForm:i,registerFormRef:n,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在3到20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度应在6到20个字符之间",trigger:"blur"},{validator:(u,t,r)=>{t===""?r(new Error("请输入密码")):(i.confirmPassword!==""&&n.value.validateField("confirmPassword"),r())},trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(u,t,r)=>{t===""?r(new Error("请再次输入密码")):t!==i.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]},loading:s,handleRegister:async()=>{n.value&&await n.value.validate(async u=>{if(u){s.value=!0;try{const{username:t,password:r}=i,w=await e.register({username:t,password:r});w.success?(f.success("注册成功，请登录"),p.push("/")):f.error(w.message)}catch{f.error("注册失败，请稍后再试")}finally{s.value=!1}}})}}}},U={class:"register-container"},q={class:"background-animation"},B={class:"register-box"},N={class:"login-link"};function h(p,e,n,s,i,x){const c=m("el-input"),d=m("el-form-item"),_=m("el-button"),u=m("el-form"),t=m("router-link");return F(),v("div",U,[l("div",q,[(F(),v(P,null,y(10,r=>l("div",{class:"bubble",key:r})),64))]),l("div",B,[e[6]||(e[6]=l("div",{class:"welcome-text"},[l("h1",null,"创建账号"),l("p",null,"加入家庭聊天，与家人共享精彩瞬间")],-1)),o(u,{model:s.registerForm,rules:s.rules,ref:"registerFormRef","label-width":"0",class:"register-form"},{default:a(()=>[o(d,{prop:"username"},{default:a(()=>[o(c,{modelValue:s.registerForm.username,"onUpdate:modelValue":e[0]||(e[0]=r=>s.registerForm.username=r),placeholder:"用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),o(d,{prop:"password"},{default:a(()=>[o(c,{modelValue:s.registerForm.password,"onUpdate:modelValue":e[1]||(e[1]=r=>s.registerForm.password=r),type:"password",placeholder:"密码","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),o(d,{prop:"confirmPassword"},{default:a(()=>[o(c,{modelValue:s.registerForm.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=r=>s.registerForm.confirmPassword=r),type:"password",placeholder:"确认密码","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),o(d,null,{default:a(()=>[o(_,{type:"primary",loading:s.loading,onClick:s.handleRegister,class:"register-button"},{default:a(()=>e[3]||(e[3]=[g("创建账号")])),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"]),l("div",N,[e[5]||(e[5]=g(" 已有账号？")),o(t,{to:"/"},{default:a(()=>e[4]||(e[4]=[g("立即登录")])),_:1})])])])}const L=V(C,[["render",h],["__scopeId","data-v-c467e81c"]]);export{L as default};
