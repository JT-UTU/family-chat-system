import{h as o,i as r}from"./index-DIpLPPCx.js";const u=o("user",{state:()=>({user:null,token:localStorage.getItem("token")||null,isAuthenticated:!!localStorage.getItem("token")}),getters:{getUser:s=>s.user,isLoggedIn:s=>s.isAuthenticated},actions:{async login(s){try{const e=await r.post("/auth/login",s),{token:t,user:a}=e.data;return this.user=a,this.token=t,this.isAuthenticated=!0,localStorage.setItem("token",t),{success:!0}}catch(e){return{success:!1,message:e.response&&e.response.data&&e.response.data.message||"登录失败，请稍后再试"}}},async register(s){try{return{success:!0,data:(await r.post("/auth/register",s)).data}}catch(e){return{success:!1,message:e.response&&e.response.data&&e.response.data.message||"注册失败，请稍后再试"}}},logout(){this.user=null,this.token=null,this.isAuthenticated=!1,localStorage.removeItem("token")}}});export{u};
